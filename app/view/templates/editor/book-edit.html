
<div class="row-fluid">
	<div class="span8">
	<button index-actions ng-click="addGroupTo()" location="catalogue.edit.chapters" type="paste" class="btn btn-small">Paste Chapter</button>

<form class="form-horizontal">
	<fieldset>
		<legend>Edit Book: {{catalogue.edit.title}}</legend>
		<div class="control-group">
			<label class="control-label" for="input01">Page Title</label>
			<div class="controls">
				<input type="text" class="input-xlarge" ng-model="catalogue.edit.title">
			</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="textarea">Description</label>
			<div class="controls">
				<input type="text" class="input-xlarge" ng-model="catalogue.edit.description">
			</div>
		</div>	
		<div class="control-group">
			<label class="control-label" for="textarea">Intro Content</label>
			<div class="controls">
				<textarea class="input-xlarge content-textarea" ng-model="catalogue.edit.content"></textarea>
			</div>
		</div>

		<div class="control-group">
			<label class="control-label" for="textarea">Additional Content</label>
			<div class="controls">
				<div ui-sortable="sortableOptions" ng-model="catalogue.edit.additionalContent">

					<table class="table codeTable" ng-repeat="content in catalogue.edit.additionalContent" >
						<tbody>
							<tr>
								<td><textarea ng-model="content.text" class="input-xlarge content-textarea" style="height:80px;"></textarea></td>
								<td><a class="btn btn-small btn-warning" remove-thing remove-from="catalogue.edit.additionalContent" thing-index="$index">X</a></td>
							</tr>
						</tbody>
					</table>
					
				</div>

				<a class="btn" add-thing-to add-to-where="catalogue.edit" add-what="additionalContent">+ Add Content</a>
			</div>
		</div>

		<div class="control-group">
			<label class="control-label" for="textarea">Preview</label>
			<div class="controls">
				<div content-preview="catalogue.edit.content" ng-bind-html-unsafe="content">{{content}}</div>
			</div>
			<div class="controls">
				<div ng-repeat="content in catalogue.edit.additionalContent" content-preview="content.text" ng-bind-html-unsafe="content">{{content}}</div>
			</div>
		</div>				



		<div class="control-group">
			<label class="control-label" for="select01">Upload Image</label>
			<div class="controls">

						<div clg-upload-container>

							<input id="inputImage" 
							type="file" 
							accept="image/*" 
							image="image" 
							resize-max-height="50"
							resize-max-width="50"
							resize-quality="0.7" />

		      		  </div>
			</div>
		</div>

		<div class="control-group">
			<label class="control-label" for="select01">Images</label>
			<div class="controls">
				<div clg-item-browser="image-browser" items="catalogue.edit.images" ui-sortable="sortableOptions" ng-model="images"></div>
			</div>
		</div>

		<div class="control-group">
			<label class="control-label" for="select01">All Images</label>
			<div class="controls">
				<div clg-item-browser="image-browser" items="catalogue.imageBrowser" target="catalogue.edit.images"></div>
			</div>
		</div>





		<div class="form-actions">
			<button type="submit" class="btn btn-primary" ng-click="catalogue.savePage()">Save changes</button>
			<button class="btn">Cancel</button>
		</div>
	</fieldset>
</form>
</div>




<div class="span4 ">
		<div class="well">
			<h5>In {{catalogue.edit.title}}</h5>
			<div sortable-options ui-sortable="sortableOptions" ng-model="catalogue.edit.books">
			<table ng-repeat="chapter in catalogue.edit.chapters" class="codeTable table">
				<body>
					<tr>
						<td class="itemTitle"><a href="#/guide/{{routeParams.guideIndex}}/book/{{routeParams.bookIndex}}/chapter/{{$index}}">{{chapter.title}}</td>
						<td class="itemOptions" ng-switch on="options">
							<div ng-switch-when="copy">
								<a class="btn btn-small btn-warning" ng-click="addItem(chapter)">+</a>
							</div>
							<div ng-switch-default>
								<a class="btn btn-small btn-warning" remove-thing remove-from="catalogue.edit.chapters" thing-index="$index">X</a>
								<a class="btn btn-small btn-warning" index-actions ng-click="copy()" target="chapter">copy</a>

							</div>
						</td>
					</tr>
				</body>
			</table>
			</div>
			<a index-actions type="chapter" location="catalogue.edit.chapters" ng-click="addGroupTo()">New chapter</a>
			<br>
			<a index-actions type="paste" location="catalogue.edit.chapters" ng-click="addGroupTo()">Paste chapter</a>
		</div>

		<button index-actions ng-click="copy()" target="catalogue.edit" class="btn btn-small">Copy {{catalogue.edit.type}}</button>


		
	</div>
</div>